"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _Dialog = _interopRequireDefault(require("@material-ui/core/Dialog"));

var _DialogActions = _interopRequireDefault(require("@material-ui/core/DialogActions"));

var _DialogContent = _interopRequireDefault(require("@material-ui/core/DialogContent"));

var _Toolbar = _interopRequireDefault(require("@material-ui/core/Toolbar"));

var _IconButton = _interopRequireDefault(require("@material-ui/core/IconButton"));

var _reactBootstrap = require("react-bootstrap");

require("./AddPaneModal.styles.css");

var styles = {
  toolBar: {
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'center',
    color: 'var(--reverse-color)',
    backgroundColor: 'var(--accent-color-dark)',
    padding: '15px',
    width: '100%'
  },
  title: {
    marginLeft: 'auto',
    fontSize: '22px',
    fontWeight: '400'
  },
  closeButton: {
    marginLeft: 'auto'
  },
  dialogContent: {
    color: 'rgba(0, 0, 0, 0.6)',
    textAlign: 'center',
    padding: '0px 24px 24px',
    margin: '0px'
  },
  dialogActions: {
    height: '70px',
    padding: '10px',
    margin: '0px',
    borderTop: '1px solid var(--border-color)'
  },
  icon: {
    color: '#ffffff',
    width: 25,
    height: 25
  },
  iconButton: {
    padding: 0,
    width: 25,
    height: 25,
    marginTop: 5
  },
  body: {
    textAlign: 'center'
  },
  select: {
    margin: '0 auto',
    width: '300px'
  }
};

var AddPaneModal = function AddPaneModal(_ref) {
  var show = _ref.show,
      onHide = _ref.onHide,
      title = _ref.title,
      selectLanguageLabel = _ref.selectLanguageLabel,
      selectLabel = _ref.selectLabel,
      selectSourceLanguage = _ref.selectSourceLanguage,
      selectedPane = _ref.selectedPane,
      addNewBibleResource = _ref.addNewBibleResource,
      currentPaneSettings = _ref.currentPaneSettings,
      translate = _ref.translate,
      getAvailableScripturePaneSelections = _ref.getAvailableScripturePaneSelections;
  var panes = [];
  var availableResources = [];
  getAvailableScripturePaneSelections(availableResources);

  var _loop = function _loop(i, len) {
    var resource = availableResources[i];
    var _resource$manifest = resource.manifest,
        resource_title = _resource$manifest.resource_title,
        language_name = _resource$manifest.language_name,
        language_id = _resource$manifest.language_id;
    var displayText = '';

    if (resource.bibleId !== 'targetBible') {
      var languageId = resource.languageId !== 'originalLanguage' ? resource.languageId : translate('pane.original_language');
      displayText = "".concat(language_name, " (").concat(languageId, ")  (").concat(resource_title, ")");
    } else {
      displayText = "".concat(language_name, " (").concat(language_id, ")  (").concat(translate('pane.target_language'), ") (").concat(translate('pane.current_project'), ")");
    }

    var foundInCurrentPaneSettings = currentPaneSettings.findIndex(function (paneSetting) {
      return paneSetting.bibleId === resource.bibleId && paneSetting.languageId === resource.languageId;
    }) >= 0;
    panes.push(_react["default"].createElement("option", {
      key: "".concat(i).concat(resource.languageId, "_").concat(resource.bibleId),
      value: "".concat(resource.languageId, "_").concat(resource.bibleId),
      disabled: foundInCurrentPaneSettings
    }, displayText));
  };

  for (var i = 0, len = availableResources.length; i < len; i++) {
    _loop(i, len);
  }

  return _react["default"].createElement(_Dialog["default"], {
    open: show,
    onClose: onHide,
    fullWidth: true,
    maxWidth: "md"
  }, _react["default"].createElement(_Toolbar["default"], {
    style: styles.toolBar
  }, _react["default"].createElement("div", {
    style: styles.title
  }, title), _react["default"].createElement(_IconButton["default"], {
    color: "inherit",
    onClick: onHide,
    "aria-label": "Close",
    style: styles.closeButton
  }, _react["default"].createElement(_reactBootstrap.Glyphicon, {
    glyph: "remove"
  }))), _react["default"].createElement(_DialogContent["default"], {
    style: styles.dialogContent
  }, _react["default"].createElement("h4", {
    style: {
      marginBottom: '30px'
    }
  }, selectLanguageLabel), _react["default"].createElement(_reactBootstrap.FormControl, {
    componentClass: "select",
    style: styles.select,
    onChange: function onChange(e) {
      return selectSourceLanguage(e.target.value);
    }
  }, _react["default"].createElement("option", {
    value: ""
  }, selectLabel), panes)), _react["default"].createElement(_DialogActions["default"], {
    disableActionSpacing: true,
    style: styles.dialogActions
  }, _react["default"].createElement("button", {
    className: "btn-second",
    onClick: onHide
  }, translate('close')), selectedPane && _react["default"].createElement("button", {
    className: "btn-prime",
    onClick: addNewBibleResource
  }, translate('load'))));
};

AddPaneModal.propTypes = {
  show: _propTypes["default"].bool.isRequired,
  onHide: _propTypes["default"].func.isRequired,
  title: _propTypes["default"].string.isRequired,
  selectLanguageLabel: _propTypes["default"].string.isRequired,
  selectLabel: _propTypes["default"].string.isRequired,
  selectSourceLanguage: _propTypes["default"].func.isRequired,
  selectedPane: _propTypes["default"].oneOfType([_propTypes["default"].bool, _propTypes["default"].shape({
    bibleId: _propTypes["default"].string,
    languageId: _propTypes["default"].string
  })]),
  addNewBibleResource: _propTypes["default"].func.isRequired,
  currentPaneSettings: _propTypes["default"].array.isRequired,
  translate: _propTypes["default"].func.isRequired,
  getAvailableScripturePaneSelections: _propTypes["default"].func.isRequired
};
var _default = AddPaneModal;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9TY3JpcHR1cmVQYW5lL0FkZFBhbmVNb2RhbC9pbmRleC5qcyJdLCJuYW1lcyI6WyJzdHlsZXMiLCJ0b29sQmFyIiwiZGlzcGxheSIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwicGFkZGluZyIsIndpZHRoIiwidGl0bGUiLCJtYXJnaW5MZWZ0IiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiY2xvc2VCdXR0b24iLCJkaWFsb2dDb250ZW50IiwidGV4dEFsaWduIiwibWFyZ2luIiwiZGlhbG9nQWN0aW9ucyIsImhlaWdodCIsImJvcmRlclRvcCIsImljb24iLCJpY29uQnV0dG9uIiwibWFyZ2luVG9wIiwiYm9keSIsInNlbGVjdCIsIkFkZFBhbmVNb2RhbCIsInNob3ciLCJvbkhpZGUiLCJzZWxlY3RMYW5ndWFnZUxhYmVsIiwic2VsZWN0TGFiZWwiLCJzZWxlY3RTb3VyY2VMYW5ndWFnZSIsInNlbGVjdGVkUGFuZSIsImFkZE5ld0JpYmxlUmVzb3VyY2UiLCJjdXJyZW50UGFuZVNldHRpbmdzIiwidHJhbnNsYXRlIiwiZ2V0QXZhaWxhYmxlU2NyaXB0dXJlUGFuZVNlbGVjdGlvbnMiLCJwYW5lcyIsImF2YWlsYWJsZVJlc291cmNlcyIsImkiLCJsZW4iLCJyZXNvdXJjZSIsIm1hbmlmZXN0IiwicmVzb3VyY2VfdGl0bGUiLCJsYW5ndWFnZV9uYW1lIiwibGFuZ3VhZ2VfaWQiLCJkaXNwbGF5VGV4dCIsImJpYmxlSWQiLCJsYW5ndWFnZUlkIiwiZm91bmRJbkN1cnJlbnRQYW5lU2V0dGluZ3MiLCJmaW5kSW5kZXgiLCJwYW5lU2V0dGluZyIsInB1c2giLCJsZW5ndGgiLCJtYXJnaW5Cb3R0b20iLCJlIiwidGFyZ2V0IiwidmFsdWUiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJib29sIiwiaXNSZXF1aXJlZCIsImZ1bmMiLCJzdHJpbmciLCJvbmVPZlR5cGUiLCJzaGFwZSIs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QnpCLEVBQUFBLG1DQUFtQyxFQUFFdUIsc0JBQVVHLElBQVYsQ0FBZUQ7QUFqQjdCLENBQXpCO2VBb0JlbkMsWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IERpYWxvZyBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9EaWFsb2cnO1xuaW1wb3J0IERpYWxvZ0FjdGlvbnMgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvRGlhbG9nQWN0aW9ucyc7XG5pbXBvcnQgRGlhbG9nQ29udGVudCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9EaWFsb2dDb250ZW50JztcbmltcG9ydCBUb29sYmFyIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL1Rvb2xiYXInO1xuaW1wb3J0IEljb25CdXR0b24gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvSWNvbkJ1dHRvbic7XG5pbXBvcnQgeyBHbHlwaGljb24sIEZvcm1Db250cm9sIH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcblxuaW1wb3J0ICcuL0FkZFBhbmVNb2RhbC5zdHlsZXMuY3NzJztcblxuY29uc3Qgc3R5bGVzID0ge1xuICB0b29sQmFyOiB7XG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBjb2xvcjogJ3ZhcigtLXJldmVyc2UtY29sb3IpJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1hY2NlbnQtY29sb3ItZGFyayknLFxuICAgIHBhZGRpbmc6ICcxNXB4JyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICB9LFxuICB0aXRsZToge1xuICAgIG1hcmdpbkxlZnQ6ICdhdXRvJyxcbiAgICBmb250U2l6ZTogJzIycHgnLFxuICAgIGZvbnRXZWlnaHQ6ICc0MDAnLFxuICB9LFxuICBjbG9zZUJ1dHRvbjogeyBtYXJnaW5MZWZ0OiAnYXV0bycgfSxcbiAgZGlhbG9nQ29udGVudDoge1xuICAgIGNvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjYpJyxcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgIHBhZGRpbmc6ICcwcHggMjRweCAyNHB4JyxcbiAgICBtYXJnaW46ICcwcHgnLFxuICB9LFxuICBkaWFsb2dBY3Rpb25zOiB7XG4gICAgaGVpZ2h0OiAnNzBweCcsXG4gICAgcGFkZGluZzogJzEwcHgnLFxuICAgIG1hcmdpbjogJzBweCcsXG4gICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvciknLFxuICB9LFxuXG4gIGljb246IHtcbiAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgIHdpZHRoOiAyNSxcbiAgICBoZWlnaHQ6IDI1LFxuICB9LFxuICBpY29uQnV0dG9uOiB7XG4gICAgcGFkZGluZzogMCxcbiAgICB3aWR0aDogMjUsXG4gICAgaGVpZ2h0OiAyNSxcbiAgICBtYXJnaW5Ub3A6IDUsXG4gIH0sXG4gIGJvZHk6IHsgdGV4dEFsaWduOiAnY2VudGVyJyB9LFxuICBzZWxlY3Q6IHtcbiAgICBtYXJnaW46ICcwIGF1dG8nLFxuICAgIHdpZHRoOiAnMzAwcHgnLFxuICB9LFxufTtcblxuY29uc3QgQWRkUGFuZU1vZGFsID0gKHtcbiAgc2hvdyxcbiAgb25IaWRlLFxuICB0aXRsZSxcbiAgc2VsZWN0TGFuZ3VhZ2VMYWJlbCxcbiAgc2VsZWN0TGFiZWwsXG4gIHNlbGVjdFNvdXJjZUxhbmd1YWdlLFxuICBzZWxlY3RlZFBhbmUsXG4gIGFkZE5ld0JpYmxlUmVzb3VyY2UsXG4gIGN1cnJlbnRQYW5lU2V0dGluZ3MsXG4gIHRyYW5zbGF0ZSxcbiAgZ2V0QXZhaWxhYmxlU2NyaXB0dXJlUGFuZVNlbGVjdGlvbnMsXG59KSA9PiB7XG4gIGNvbnN0IHBhbmVzID0gW107XG4gIGNvbnN0IGF2YWlsYWJsZVJlc291cmNlcyA9IFtdO1xuICBnZXRBdmFpbGFibGVTY3JpcHR1cmVQYW5lU2VsZWN0aW9ucyhhdmFpbGFibGVSZXNvdXJjZXMpO1xuXG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhdmFpbGFibGVSZXNvdXJjZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCByZXNvdXJjZSA9IGF2YWlsYWJsZVJlc291cmNlc1tpXTtcbiAgICBjb25zdCB7XG4gICAgICByZXNvdXJjZV90aXRsZSwgbGFuZ3VhZ2VfbmFtZSwgbGFuZ3VhZ2VfaWQsXG4gICAgfSA9IHJlc291cmNlLm1hbmlmZXN0O1xuICAgIGxldCBkaXNwbGF5VGV4dCA9ICcnO1xuXG4gICAgaWYgKHJlc291cmNlLmJpYmxlSWQgIT09ICd0YXJnZXRCaWJsZScpIHtcbiAgICAgIGNvbnN0IGxhbmd1YWdlSWQgPSAocmVzb3VyY2UubGFuZ3VhZ2VJZCAhPT0gJ29yaWdpbmFsTGFuZ3VhZ2UnKSA/IHJlc291cmNlLmxhbmd1YWdlSWQgOiB0cmFuc2xhdGUoJ3BhbmUub3JpZ2luYWxfbGFuZ3VhZ2UnKTtcbiAgICAgIGRpc3BsYXlUZXh0ID0gYCR7bGFuZ3VhZ2VfbmFtZX0gKCR7bGFuZ3VhZ2VJZH0pICAoJHtyZXNvdXJjZV90aXRsZX0pYDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGxheVRleHQgPSBgJHtsYW5ndWFnZV9uYW1lfSAoJHtsYW5ndWFnZV9pZH0pICAoJHt0cmFuc2xhdGUoJ3BhbmUudGFyZ2V0X2xhbmd1YWdlJyl9KSAoJHt0cmFuc2xhdGUoJ3BhbmUuY3VycmVudF9wcm9qZWN0Jyl9KWA7XG4gICAgfVxuXG4gICAgY29uc3QgZm91bmRJbkN1cnJlbnRQYW5lU2V0dGluZ3MgPSBjdXJyZW50UGFuZVNldHRpbmdzLmZpbmRJbmRleCgocGFuZVNldHRpbmcpID0+IHBhbmVTZXR0aW5nLmJpYmxlSWQgPT09IHJlc291cmNlLmJpYmxlSWQgJiYgcGFuZVNldHRpbmcubGFuZ3VhZ2VJZCA9PT0gcmVzb3VyY2UubGFuZ3VhZ2VJZCkgPj0gMDtcblxuICAgIHBhbmVzLnB1c2goXG4gICAgICA8b3B0aW9uXG4gICAgICAgIGtleT17YCR7aX0ke3Jlc291cmNlLmxhbmd1YWdlSWR9XyR7cmVzb3VyY2UuYmlibGVJZH1gfVxuICAgICAgICB2YWx1ZT17YCR7cmVzb3VyY2UubGFuZ3VhZ2VJZH1fJHtyZXNvdXJjZS5iaWJsZUlkfWB9XG4gICAgICAgIGRpc2FibGVkPXtmb3VuZEluQ3VycmVudFBhbmVTZXR0aW5nc31cbiAgICAgID5cbiAgICAgICAge2Rpc3BsYXlUZXh0fVxuICAgICAgPC9vcHRpb24+LFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxEaWFsb2cgb3Blbj17c2hvd30gb25DbG9zZT17b25IaWRlfSBmdWxsV2lkdGggbWF4V2lkdGg9J21kJz5cbiAgICAgIDxUb29sYmFyIHN0eWxlPXtzdHlsZXMudG9vbEJhcn0+XG4gICAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy50aXRsZX0+XG4gICAgICAgICAge3RpdGxlfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEljb25CdXR0b24gY29sb3I9XCJpbmhlcml0XCIgb25DbGljaz17b25IaWRlfSBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBzdHlsZT17c3R5bGVzLmNsb3NlQnV0dG9ufT5cbiAgICAgICAgICA8R2x5cGhpY29uIGdseXBoPVwicmVtb3ZlXCIgLz5cbiAgICAgICAgPC9JY29uQnV0dG9uPlxuICAgICAgPC9Ub29sYmFyPlxuICAgICAgPERpYWxvZ0NvbnRlbnQgc3R5bGU9e3N0eWxlcy5kaWFsb2dDb250ZW50fT5cbiAgICAgICAgPGg0IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogJzMwcHgnIH19PlxuICAgICAgICAgIHtzZWxlY3RMYW5ndWFnZUxhYmVsfVxuICAgICAgICA8L2g0PlxuICAgICAgICA8Rm9ybUNvbnRyb2xcbiAgICAgICAgICBjb21wb25lbnRDbGFzcz1cInNlbGVjdFwiXG4gICAgICAgICAgc3R5bGU9e3N0eWxlcy5zZWxlY3R9XG4gICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2VsZWN0U291cmNlTGFuZ3VhZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICA+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPntzZWxlY3RMYWJlbH08L29wdGlvbj5cbiAgICAgICAgICB7cGFuZXN9XG4gICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8RGlhbG9nQWN0aW9ucyBkaXNhYmxlQWN0aW9uU3BhY2luZyBzdHlsZT17c3R5bGVzLmRpYWxvZ0FjdGlvbnN9PlxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0bi1zZWNvbmRcIiBvbkNsaWNrPXtvbkhpZGV9PlxuICAgICAgICAgIHt0cmFuc2xhdGUoJ2Nsb3NlJyl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICB7XG4gICAgICAgICAgc2VsZWN0ZWRQYW5lICYmXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4tcHJpbWVcIiBvbkNsaWNrPXthZGROZXdCaWJsZVJlc291cmNlfT5cbiAgICAgICAgICAgIHt0cmFuc2xhdGUoJ2xvYWQnKX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgfVxuICAgICAgPC9EaWFsb2dBY3Rpb25zPlxuICAgIDwvRGlhbG9nPlxuICApO1xufTtcblxuQWRkUGFuZU1vZGFsLnByb3BUeXBlcyA9IHtcbiAgc2hvdzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBzZWxlY3RMYW5ndWFnZUxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIHNlbGVjdExhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIHNlbGVjdFNvdXJjZUxhbmd1YWdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZWxlY3RlZFBhbmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5ib29sLFxuICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBiaWJsZUlkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgbGFuZ3VhZ2VJZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KSxcbiAgXSksXG4gIGFkZE5ld0JpYmxlUmVzb3VyY2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGN1cnJlbnRQYW5lU2V0dGluZ3M6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxuICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGdldEF2YWlsYWJsZVNjcmlwdHVyZVBhbmVTZWxlY3Rpb25zOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQWRkUGFuZU1vZGFsO1xuIl19