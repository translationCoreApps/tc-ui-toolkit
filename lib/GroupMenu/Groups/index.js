"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _Group = _interopRequireDefault(require("../Group"));

var _NoResults = _interopRequireDefault(require("../NoResults"));

var helpers = _interopRequireWildcard(require("../helpers"));

require("./Groups.styles.css");

// components
//helpers
var Groups = function Groups(_ref) {
  var changeCurrentContextId = _ref.changeCurrentContextId,
      filters = _ref.filters,
      _ref$groupsIndex = _ref.groupsIndex,
      groupsIndex = _ref$groupsIndex === void 0 ? [] : _ref$groupsIndex,
      _ref$groupsData = _ref.groupsData,
      groupsData = _ref$groupsData === void 0 ? {} : _ref$groupsData,
      getGroupProgress = _ref.getGroupProgress,
      groupMenuChangeGroup = _ref.groupMenuChangeGroup,
      groupMenuExpandSubMenu = _ref.groupMenuExpandSubMenu,
      isSubMenuExpanded = _ref.isSubMenuExpanded,
      manifest = _ref.manifest,
      contextId = _ref.contextId,
      translate = _ref.translate,
      getSelections = _ref.getSelections,
      isVerseFinished = _ref.isVerseFinished,
      isVerseValid = _ref.isVerseValid,
      currentToolName = _ref.currentToolName;

  var groupComponents = _react["default"].createElement(_NoResults["default"], {
    translate: translate
  });

  groupsIndex = groupsIndex.filter(function (groupIndex) {
    return Object.keys(groupsData).includes(groupIndex.id) && helpers.groupIsVisible(helpers.getGroupData(groupsData, groupIndex.id), filters);
  });

  if (groupsIndex.length) {
    groupComponents = [];

    var _loop = function _loop(i, len) {
      var groupIndex = groupsIndex[i];
      var groupId = groupIndex.id;
      var currentGroupData = helpers.getGroupData(groupsData, groupId);
      var active = contextId ? contextId.groupId === groupId : false;
      groupComponents.push(_react["default"].createElement(_Group["default"], {
        currentToolName: currentToolName,
        isVerseValid: isVerseValid,
        isVerseFinished: isVerseFinished,
        contextId: contextId,
        getSelections: getSelections,
        changeCurrentContextId: changeCurrentContextId,
        manifest: manifest,
        filters: filters,
        groupData: currentGroupData,
        isSubMenuExpanded: isSubMenuExpanded,
        groupIndex: groupIndex,
        active: active,
        key: groupIndex.id,
        progress: getGroupProgress(groupIndex, groupsData),
        groupMenuExpandSubMenu: groupMenuExpandSubMenu,
        openGroup: function openGroup() {
          return groupMenuChangeGroup(currentGroupData[0].contextId);
        }
      }));
    };

    for (var i = 0, len = groupsIndex.length; i < len; i++) {
      _loop(i, len);
    }
  }

  return _react["default"].createElement("div", {
    className: "groups"
  }, groupComponents);
};

Groups.propTypes = {
  changeCurrentContextId: _propTypes["default"].func.isRequired,
  filters: _propTypes["default"].object.isRequired,
  groupsIndex: _propTypes["default"].array.isRequired,
  groupsData: _propTypes["default"].object.isRequired,
  getGroupProgress: _propTypes["default"].func.isRequired,
  groupMenuChangeGroup: _propTypes["default"].func.isRequired,
  groupMenuExpandSubMenu: _propTypes["default"].func.isRequired,
  isSubMenuExpanded: _propTypes["default"].bool.isRequired,
  manifest: _propTypes["default"].object.isRequired,
  contextId: _propTypes["default"].object.isRequired,
  translate: _propTypes["default"].func.isRequired,
  getSelections: _propTypes["default"].func.isRequired,
  isVerseFinished: _propTypes["default"].func.isRequired,
  isVerseValid: _propTypes["default"].func.isRequired,
  currentToolName: _propTypes["default"].string.isRequired
};
var _default = Groups;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9Hcm91cE1lbnUvR3JvdXBzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkdyb3VwcyIsImNoYW5nZUN1cnJlbnRDb250ZXh0SWQiLCJmaWx0ZXJzIiwiZ3JvdXBzSW5kZXgiLCJncm91cHNEYXRhIiwiZ2V0R3JvdXBQcm9ncmVzcyIsImdyb3VwTWVudUNoYW5nZUdyb3VwIiwiZ3JvdXBNZW51RXhwYW5kU3ViTWVudSIsImlzU3ViTWVudUV4cGFuZGVkIiwibWFuaWZlc3QiLCJjb250ZXh0SWQiLCJ0cmFuc2xhdGUiLCJnZXRTZWxlY3Rpb25zIiwiaXNWZXJzZUZpbmlzaGVkIiwiaXNWZXJzZVZhbGlkIiwiY3VycmVudFRvb2xOYW1lIiwiZ3JvdXBDb21wb25lbnRzIiwiZmlsdGVyIiwiZ3JvdXBJbmRleCIsIk9iamVjdCIsImtleXMiLCJpbmNsdWRlcyIsImlkIiwiaGVscGVycyIsImdyb3VwSXNWaXNpYmxlIiwiZ2V0R3JvdXBEYXRhIiwibGVuZ3RoIiwiaSIsImxlbiIsImdyb3VwSWQiLCJjdXJyZW50R3JvdXBEYXRhIiwiYWN0aXZlIiwicHVzaCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImZ1bmMiLCJpc1JlcXVpcmVkIiwib2JqZWN0IiwiYXJyYXkiLCJib29sIiwic3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOztBQUVBOztBQUVBOztBQU5BO0FBR0E7QUFLQSxJQUFNQSxNQUFNLEdBQUcsU0FBVEEsTUFBUyxPQWdCVDtBQUFBLE1BZkpDLHNCQWVJLFFBZkpBLHNCQWVJO0FBQUEsTUFkSkMsT0FjSSxRQWRKQSxPQWNJO0FBQUEsOEJBYkpDLFdBYUk7QUFBQSxNQWJKQSxXQWFJLGlDQWJVLEVBYVY7QUFBQSw2QkFaSkMsVUFZSTtBQUFBLE1BWkpBLFVBWUksZ0NBWlMsRUFZVDtBQUFBLE1BWEpDLGdCQVdJLFFBWEpBLGdCQVdJO0FBQUEsTUFWSkMsb0JBVUksUUFWSkEsb0JBVUk7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c0JBQVVDLElBQVYsQ0FBZUMsVUFEdEI7QUFFakJsQyxFQUFBQSxPQUFPLEVBQUVnQyxzQkFBVUcsTUFBVixDQUFpQkQsVUFGVDtBQUdqQmpDLEVBQUFBLFdBQVcsRUFBRytCLHNCQUFVSSxLQUFWLENBQWdCRixVQUhiO0FBSWpCaEMsRUFBQUEsVUFBVSxFQUFHOEIsc0JBQVVHLE1BQVYsQ0FBaUJELFVBSmI7QUFLakIvQixFQUFBQSxnQkFBZ0IsRUFBRTZCLHNCQUFVQyxJQUFWLENBQWVDLFVBTGhCO0FBTWpCOUIsRUFBQUEsb0JBQW9CLEVBQUU0QixzQkFBVUMsSUFBVixDQUFlQyxVQU5wQjtBQU9qQjdCLEVBQUFBLHNCQUFzQixFQUFFMkIsc0JBQVVDLElBQVYsQ0FBZUMsVUFQdEI7QUFRakI1QixFQUFBQSxpQkFBaUIsRUFBRTBCLHNCQUFVSyxJQUFWLENBQWVILFVBUmpCO0FBU2pCM0IsRUFBQUEsUUFBUSxFQUFFeUIsc0JBQVVHLE1BQVYsQ0FBaUJELFVBVFY7QUFVakIxQixFQUFBQSxTQUFTLEVBQUV3QixzQkFBVUcsTUFBVixDQUFpQkQsVUFWWDtBQVdqQnpCLEVBQUFBLFNBQVMsRUFBRXVCLHNCQUFVQyxJQUFWLENBQWVDLFVBWFQ7QUFZakJ4QixFQUFBQSxhQUFhLEVBQUVzQixzQkFBVUMsSUFBVixDQUFlQyxVQVpiO0FBYWpCdkIsRUFBQUEsZUFBZSxFQUFFcUIsc0JBQVVDLElBQVYsQ0FBZUMsVUFiZjtBQWNqQnRCLEVBQUFBLFlBQVksRUFBRW9CLHNCQUFVQyxJQUFWLENBQWVDLFVBZFo7QUFlakJyQixFQUFBQSxlQUFlLEVBQUVtQixzQkFBVU0sTUFBVixDQUFpQko7QUFmakIsQ0FBbkI7ZUFrQmVwQyxNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG4vLyBjb21wb25lbnRzXG5pbXBvcnQgR3JvdXAgZnJvbSAnLi4vR3JvdXAnO1xuaW1wb3J0IE5vUmVzdWx0cyBmcm9tICcuLi9Ob1Jlc3VsdHMnO1xuLy9oZWxwZXJzXG5pbXBvcnQgKiBhcyBoZWxwZXJzIGZyb20gJy4uL2hlbHBlcnMnO1xuXG5pbXBvcnQgJy4vR3JvdXBzLnN0eWxlcy5jc3MnO1xuXG5jb25zdCBHcm91cHMgPSAoe1xuICBjaGFuZ2VDdXJyZW50Q29udGV4dElkLFxuICBmaWx0ZXJzLFxuICBncm91cHNJbmRleCA9IFtdLFxuICBncm91cHNEYXRhID0ge30sXG4gIGdldEdyb3VwUHJvZ3Jlc3MsXG4gIGdyb3VwTWVudUNoYW5nZUdyb3VwLFxuICBncm91cE1lbnVFeHBhbmRTdWJNZW51LFxuICBpc1N1Yk1lbnVFeHBhbmRlZCxcbiAgbWFuaWZlc3QsXG4gIGNvbnRleHRJZCxcbiAgdHJhbnNsYXRlLFxuICBnZXRTZWxlY3Rpb25zLFxuICBpc1ZlcnNlRmluaXNoZWQsXG4gIGlzVmVyc2VWYWxpZCxcbiAgY3VycmVudFRvb2xOYW1lLFxufSkgPT4ge1xuICBsZXQgZ3JvdXBDb21wb25lbnRzID0gPE5vUmVzdWx0cyB0cmFuc2xhdGU9e3RyYW5zbGF0ZX0gLz47XG5cbiAgZ3JvdXBzSW5kZXggPSBncm91cHNJbmRleC5maWx0ZXIoZ3JvdXBJbmRleCA9PiBPYmplY3Qua2V5cyhncm91cHNEYXRhKS5pbmNsdWRlcyhncm91cEluZGV4LmlkKSAmJiBoZWxwZXJzLmdyb3VwSXNWaXNpYmxlKGhlbHBlcnMuZ2V0R3JvdXBEYXRhKGdyb3Vwc0RhdGEsIGdyb3VwSW5kZXguaWQpLCBmaWx0ZXJzKSk7XG5cbiAgaWYgKGdyb3Vwc0luZGV4Lmxlbmd0aCkge1xuICAgIGdyb3VwQ29tcG9uZW50cyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGdyb3Vwc0luZGV4Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb25zdCBncm91cEluZGV4ID0gZ3JvdXBzSW5kZXhbaV07XG4gICAgICBsZXQgZ3JvdXBJZCA9IGdyb3VwSW5kZXguaWQ7XG4gICAgICBsZXQgY3VycmVudEdyb3VwRGF0YSA9IGhlbHBlcnMuZ2V0R3JvdXBEYXRhKGdyb3Vwc0RhdGEsIGdyb3VwSWQpO1xuICAgICAgbGV0IGFjdGl2ZSA9IGNvbnRleHRJZCA/IGNvbnRleHRJZC5ncm91cElkID09PSBncm91cElkIDogZmFsc2U7XG5cbiAgICAgIGdyb3VwQ29tcG9uZW50cy5wdXNoKFxuICAgICAgICA8R3JvdXBcbiAgICAgICAgICBjdXJyZW50VG9vbE5hbWU9e2N1cnJlbnRUb29sTmFtZX1cbiAgICAgICAgICBpc1ZlcnNlVmFsaWQ9e2lzVmVyc2VWYWxpZH1cbiAgICAgICAgICBpc1ZlcnNlRmluaXNoZWQ9e2lzVmVyc2VGaW5pc2hlZH1cbiAgICAgICAgICBjb250ZXh0SWQ9e2NvbnRleHRJZH1cbiAgICAgICAgICBnZXRTZWxlY3Rpb25zPXtnZXRTZWxlY3Rpb25zfVxuICAgICAgICAgIGNoYW5nZUN1cnJlbnRDb250ZXh0SWQ9e2NoYW5nZUN1cnJlbnRDb250ZXh0SWR9XG4gICAgICAgICAgbWFuaWZlc3Q9e21hbmlmZXN0fVxuICAgICAgICAgIGZpbHRlcnM9e2ZpbHRlcnN9XG4gICAgICAgICAgZ3JvdXBEYXRhPXtjdXJyZW50R3JvdXBEYXRhfVxuICAgICAgICAgIGlzU3ViTWVudUV4cGFuZGVkPXtpc1N1Yk1lbnVFeHBhbmRlZH1cbiAgICAgICAgICBncm91cEluZGV4PXtncm91cEluZGV4fVxuICAgICAgICAgIGFjdGl2ZT17YWN0aXZlfVxuICAgICAgICAgIGtleT17Z3JvdXBJbmRleC5pZH1cbiAgICAgICAgICBwcm9ncmVzcz17Z2V0R3JvdXBQcm9ncmVzcyhncm91cEluZGV4LCBncm91cHNEYXRhKX1cbiAgICAgICAgICBncm91cE1lbnVFeHBhbmRTdWJNZW51PXtncm91cE1lbnVFeHBhbmRTdWJNZW51fVxuICAgICAgICAgIG9wZW5Hcm91cD17KCkgPT4gZ3JvdXBNZW51Q2hhbmdlR3JvdXAoY3VycmVudEdyb3VwRGF0YVswXS5jb250ZXh0SWQpfVxuICAgICAgICAvPixcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2dyb3Vwcyc+XG4gICAgICB7Z3JvdXBDb21wb25lbnRzfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuR3JvdXBzLnByb3BUeXBlcyA9IHtcbiAgY2hhbmdlQ3VycmVudENvbnRleHRJZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZmlsdGVyczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBncm91cHNJbmRleCA6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxuICBncm91cHNEYXRhIDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBnZXRHcm91cFByb2dyZXNzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBncm91cE1lbnVDaGFuZ2VHcm91cDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZ3JvdXBNZW51RXhwYW5kU3ViTWVudTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNTdWJNZW51RXhwYW5kZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIG1hbmlmZXN0OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGNvbnRleHRJZDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGdldFNlbGVjdGlvbnM6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGlzVmVyc2VGaW5pc2hlZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNWZXJzZVZhbGlkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBjdXJyZW50VG9vbE5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyb3VwcztcbiJdfQ==