"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _utils = require("../utils");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

describe('generate menu data', function () {
  it('has empty input data', function () {
    var groupIndex = [];
    var groupData = {};
    var progressKey = 'complete';
    var onProcessItem = null;
    var menuData = (0, _utils.generateMenuData)(groupIndex, groupData, progressKey, onProcessItem);
    expect(menuData).toEqual([]);
  });
  it('has a custom item processor', function () {
    var groupIndex = [{
      id: 'abraham',
      name: 'Abraham'
    }, {
      id: 'adoption',
      name: 'adoption, adopt, adopted'
    }];
    var groupData = {
      adoption: [{
        contextId: {
          reference: {
            bookId: 'gal',
            chapter: 4,
            verse: 5
          },
          groupId: 'adoption',
          occurrence: 1
        }
      }]
    };
    var progressKey = 'completed';

    var onProcessItem = function onProcessItem(item) {
      return _objectSpread({}, item, {
        customField: 'hello world',
        title: item.contextId.reference.bookId
      });
    };

    var expected = [{
      children: [{
        contextId: {
          groupId: 'adoption',
          occurrence: 1,
          reference: {
            'bookId': 'gal',
            'chapter': 4,
            'verse': 5
          }
        },
        customField: 'hello world',
        groupId: 'adoption',
        itemId: 'gal 4:5',
        title: 'gal'
      }],
      id: 'adoption',
      progress: 0,
      title: 'adoption, adopt, adopted'
    }];
    var menuData = (0, _utils.generateMenuData)(groupIndex, groupData, progressKey, onProcessItem);
    expect(menuData).toEqual(expected);
  });
  it('has input data', function () {
    var groupIndex = [{
      id: 'abraham',
      name: 'Abraham'
    }, {
      id: 'adoption',
      name: 'adoption, adopt, adopted'
    }];
    var groupData = {
      abraham: [{
        contextId: {
          reference: {
            bookId: 'gal',
            chapter: 3,
            verse: 6
          },
          groupId: 'abraham',
          occurrence: 1
        },
        completed: true
      }, {
        contextId: {
          reference: {
            bookId: 'gal',
            chapter: 3,
            verse: 7
          },
          groupId: 'abraham',
          occurrence: 1
        }
      }],
      adoption: [{
        contextId: {
          reference: {
            bookId: 'gal',
            chapter: 4,
            verse: 5
          },
          groupId: 'adoption',
          occurrence: 1
        }
      }]
    };
    var progressKey = 'completed';
    var onProcessItem = null;
    var expected = [{
      children: [{
        contextId: {
          groupId: 'abraham',
          occurrence: 1,
          reference: {
            'bookId': 'gal',
            'chapter': 3,
            'verse': 6
          }
        },
        completed: true,
        groupId: 'abraham',
        itemId: 'gal 3:6',
        title: 'gal 3:6'
      }, {
        contextId: {
          groupId: 'abraham',
          occurrence: 1,
          reference: {
            'bookId': 'gal',
            'chapter': 3,
            'verse': 7
          }
        },
        groupId: 'abraham',
        itemId: 'gal 3:7',
        title: 'gal 3:7'
      }],
      id: 'abraham',
      progress: 50,
      title: 'Abraham'
    }, {
      children: [{
        contextId: {
          groupId: 'adoption',
          occurrence: 1,
          reference: {
            'bookId': 'gal',
            'chapter': 4,
            'verse': 5
          }
        },
        groupId: 'adoption',
        itemId: 'gal 4:5',
        title: 'gal 4:5'
      }],
      id: 'adoption',
      progress: 0,
      title: 'adoption, adopt, adopted'
    }];
    var menuData = (0, _utils.generateMenuData)(groupIndex, groupData, progressKey, onProcessItem);
    expect(menuData).toEqual(expected);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9Hcm91cGVkTWVudS9fX3Rlc3RzX18vdXRpbHMudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZ3JvdXBJbmRleCIsImdyb3VwRGF0YSIsInByb2dyZXNzS2V5Iiwib25Qcm9jZXNzSXRlbSIsIm1lbnVEYXRhIiwiZXhwZWN0IiwidG9FcXVhbCIsImlkIiwibmFtZSIsImFkb3B0aW9uIiwiY29udGV4dElkIiwicmVmZXJlbmNlIiwiYm9va0lkIiwiY2hhcHRlciIsInZlcnNlIiwiZ3JvdXBJZCIsIm9jY3VycmVuY2UiLCJpdGVtIiwiY3VzdG9tRmllbGQiLCJ0aXRsZSIsImV4cGVjdGVkIiwiY2hpbGRyZW4iLCJpdGVtSWQiLCJwcm9ncmVzcyIsImFicmFoYW0iLCJjb21wbGV0ZWQiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7QUFFQUEsUUFBUSxDQUFDLG9CQUFELEVBQXVCLFlBQU07QUFDbkNDLEVBQUFBLEVBQUUsQ0FBQyxzQkFBRCxFQUF5QixZQUFNO0FBQy9CLFFBQU1DLFVBQVUsR0FBRyxFQUFuQjtBQUNBLFFBQU1DLFNBQVMsR0FBRyxFQUFsQjtBQUNBLFFBQU1DLFdBQVcsR0FBRyxVQUFwQjtBQUNBLFFBQU1DLGFBQWEsR0FBRyxJQUF0QjtBQUNBLFFBQU1DLFFBQVEsR0FBRyw2QkFBaUJKLFVBQWpCLEVBQTZCQyxTQUE3QixFQUF3Q0MsV0FBeEMsRUFDZkMsYUFEZSxDQUFqQjtBQUVBRSxJQUFBQSxNQUFNLENBQUNELFFBQUQsQ0FBTixDQUFpQkUsT0FBakIsQ0FBeUIsRUFBekI7QUFDRCxHQVJDLENBQUY7QUFVQVAsRUFBQUEsRUFBRSxDQUFDLDZCQUFELEVBQWdDLFlBQU07QUFDdEMsUUFBTUMsVUFBVSxHQUFHLENBQ2pCO0FBQ0VPLE1BQUFBLEVBQUUsRUFBRSxTQUROO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBRGlCLEVBSWQ7QUFDREQsTUFBQUEsRUFBRSxFQUFFLFVBREg7QUFF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RGUsRUFnQ2Y7QUFDRUUsTUFBQUEsUUFBUSxFQUFFLENBQ1I7QUFDRVgsUUFBQUEsU0FBUyxFQUFFO0FBQ1RLLFVBQUFBLE9BQU8sRUFBRSxVQURBO0FBRVRDLFVBQUFBLFVBQVUsRUFBRSxDQUZIO0FBR1RMLFVBQUFBLFNBQVMsRUFBRTtBQUNULHNCQUFVLEtBREQ7QUFDUSx1QkFBVyxDQURuQjtBQUNzQixxQkFBUztBQUQvQjtBQUhGLFNBRGI7QUFRRUksUUFBQUEsT0FBTyxFQUFFLFVBUlg7QUFTRU8sUUFBQUEsTUFBTSxFQUFFLFNBVFY7QUFVRUgsUUFBQUEsS0FBSyxFQUFFO0FBVlQsT0FEUSxDQURaO0FBY0VaLE1BQUFBLEVBQUUsRUFBRSxVQWROO0FBZUVnQixNQUFBQSxRQUFRLEVBQUUsQ0FmWjtBQWdCRUosTUFBQUEsS0FBSyxFQUFFO0FBaEJULEtBaENlLENBQWpCO0FBa0RBLFFBQU1mLFFBQVEsR0FBRyw2QkFBaUJKLFVBQWpCLEVBQTZCQyxTQUE3QixFQUF3Q0MsV0FBeEMsRUFDZkMsYUFEZSxDQUFqQjtBQUVBRSxJQUFBQSxNQUFNLENBQUNELFFBQUQsQ0FBTixDQUFpQkUsT0FBakIsQ0FBeUJjLFFBQXpCO0FBQ0QsR0FyR0MsQ0FBRjtBQXNHRCxDQXZLTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVNZW51RGF0YSB9IGZyb20gJy4uL3V0aWxzJztcblxuZGVzY3JpYmUoJ2dlbmVyYXRlIG1lbnUgZGF0YScsICgpID0+IHtcbiAgaXQoJ2hhcyBlbXB0eSBpbnB1dCBkYXRhJywgKCkgPT4ge1xuICAgIGNvbnN0IGdyb3VwSW5kZXggPSBbXTtcbiAgICBjb25zdCBncm91cERhdGEgPSB7fTtcbiAgICBjb25zdCBwcm9ncmVzc0tleSA9ICdjb21wbGV0ZSc7XG4gICAgY29uc3Qgb25Qcm9jZXNzSXRlbSA9IG51bGw7XG4gICAgY29uc3QgbWVudURhdGEgPSBnZW5lcmF0ZU1lbnVEYXRhKGdyb3VwSW5kZXgsIGdyb3VwRGF0YSwgcHJvZ3Jlc3NLZXksXG4gICAgICBvblByb2Nlc3NJdGVtKTtcbiAgICBleHBlY3QobWVudURhdGEpLnRvRXF1YWwoW10pO1xuICB9KTtcblxuICBpdCgnaGFzIGEgY3VzdG9tIGl0ZW0gcHJvY2Vzc29yJywgKCkgPT4ge1xuICAgIGNvbnN0IGdyb3VwSW5kZXggPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnYWJyYWhhbScsXG4gICAgICAgIG5hbWU6ICdBYnJhaGFtJyxcbiAgICAgIH0sIHtcbiAgICAgICAgaWQ6ICdhZG9wdGlvbicsXG4gICAgICAgIG5hbWU6ICdhZG9wdGlvbiwgYWRvcHQsIGFkb3B0ZWQnLFxuICAgICAgfV07XG4gICAgY29uc3QgZ3JvdXBEYXRhID0ge1xuICAgICAgYWRvcHRpb246IFtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRleHRJZDoge1xuICAgICAgICAgICAgcmVmZXJlbmNlOiB7XG4gICAgICAgICAgICAgIGJvb2tJZDogJ2dhbCcsXG4gICAgICAgICAgICAgIGNoYXB0ZXI6IDQsXG4gICAgICAgICAgICAgIHZlcnNlOiA1LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyb3VwSWQ6ICdhZG9wdGlvbicsXG4gICAgICAgICAgICBvY2N1cnJlbmNlOiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1dLFxuICAgIH07XG4gICAgY29uc3QgcHJvZ3Jlc3NLZXkgPSAnY29tcGxldGVkJztcbiAgICBjb25zdCBvblByb2Nlc3NJdGVtID0gaXRlbSA9PiAoe1xuICAgICAgLi4uaXRlbSxcbiAgICAgIGN1c3RvbUZpZWxkOiAnaGVsbG8gd29ybGQnLFxuICAgICAgdGl0bGU6IGl0ZW0uY29udGV4dElkLnJlZmVyZW5jZS5ib29rSWQsXG4gICAgfSk7XG4gICAgY29uc3QgZXhwZWN0ZWQgPSBbXG4gICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGV4dElkOiB7XG4gICAgICAgICAgICAgIGdyb3VwSWQ6ICdhZG9wdGlvbicsXG4gICAgICAgICAgICAgIG9jY3VycmVuY2U6IDEsXG4gICAgICAgICAgICAgIHJlZmVyZW5jZToge1xuICAgICAgICAgICAgICAgICdib29rSWQnOiAnZ2FsJywgJ2NoYXB0ZXInOiA0LCAndmVyc2UnOiA1LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkOiAnaGVsbG8gd29ybGQnLFxuICAgICAgICAgICAgZ3JvdXBJZDogJ2Fkb3B0aW9uJyxcbiAgICAgICAgICAgIGl0ZW1JZDogJ2dhbCA0OjUnLFxuICAgICAgICAgICAgdGl0bGU6ICdnYWwnLFxuICAgICAgICAgIH1dLFxuICAgICAgICBpZDogJ2Fkb3B0aW9uJyxcbiAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgIHRpdGxlOiAnYWRvcHRpb24sIGFkb3B0LCBhZG9wdGVkJyxcbiAgICAgIH1dO1xuICAgIGNvbnN0IG1lbnVEYXRhID0gZ2VuZXJhdGVNZW51RGF0YShncm91cEluZGV4LCBncm91cERhdGEsIHByb2dyZXNzS2V5LFxuICAgICAgb25Qcm9jZXNzSXRlbSk7XG4gICAgZXhwZWN0KG1lbnVEYXRhKS50b0VxdWFsKGV4cGVjdGVkKTtcbiAgfSk7XG5cbiAgaXQoJ2hhcyBpbnB1dCBkYXRhJywgKCkgPT4ge1xuICAgIGNvbnN0IGdyb3VwSW5kZXggPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnYWJyYWhhbScsXG4gICAgICAgIG5hbWU6ICdBYnJhaGFtJyxcbiAgICAgIH0sIHtcbiAgICAgICAgaWQ6ICdhZG9wdGlvbicsXG4gICAgICAgIG5hbWU6ICdhZG9wdGlvbiwgYWRvcHQsIGFkb3B0ZWQnLFxuICAgICAgfV07XG4gICAgY29uc3QgZ3JvdXBEYXRhID0ge1xuICAgICAgYWJyYWhhbTogW1xuICAgICAgICB7XG4gICAgICAgICAgY29udGV4dElkOiB7XG4gICAgICAgICAgICByZWZlcmVuY2U6IHtcbiAgICAgICAgICAgICAgYm9va0lkOiAnZ2FsJyxcbiAgICAgICAgICAgICAgY2hhcHRlcjogMyxcbiAgICAgICAgICAgICAgdmVyc2U6IDYsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JvdXBJZDogJ2FicmFoYW0nLFxuICAgICAgICAgICAgb2NjdXJyZW5jZTogMSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGNvbnRleHRJZDoge1xuICAgICAgICAgICAgcmVmZXJlbmNlOiB7XG4gICAgICAgICAgICAgIGJvb2tJZDogJ2dhbCcsXG4gICAgICAgICAgICAgIGNoYXB0ZXI6IDMsXG4gICAgICAgICAgICAgIHZlcnNlOiA3LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyb3VwSWQ6ICdhYnJhaGFtJyxcbiAgICAgICAgICAgIG9jY3VycmVuY2U6IDEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfV0sXG4gICAgICBhZG9wdGlvbjogW1xuICAgICAgICB7XG4gICAgICAgICAgY29udGV4dElkOiB7XG4gICAgICAgICAgICByZWZlcmVuY2U6IHtcbiAgICAgICAgICAgICAgYm9va0lkOiAnZ2FsJyxcbiAgICAgICAgICAgICAgY2hhcHRlcjogNCxcbiAgICAgICAgICAgICAgdmVyc2U6IDUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JvdXBJZDogJ2Fkb3B0aW9uJyxcbiAgICAgICAgICAgIG9jY3VycmVuY2U6IDEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfV0sXG4gICAgfTtcbiAgICBjb25zdCBwcm9ncmVzc0tleSA9ICdjb21wbGV0ZWQnO1xuICAgIGNvbnN0IG9uUHJvY2Vzc0l0ZW0gPSBudWxsO1xuICAgIGNvbnN0IGV4cGVjdGVkID0gW1xuICAgICAge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnRleHRJZDoge1xuICAgICAgICAgICAgICBncm91cElkOiAnYWJyYWhhbScsXG4gICAgICAgICAgICAgIG9jY3VycmVuY2U6IDEsXG4gICAgICAgICAgICAgIHJlZmVyZW5jZToge1xuICAgICAgICAgICAgICAgICdib29rSWQnOiAnZ2FsJywgJ2NoYXB0ZXInOiAzLCAndmVyc2UnOiA2LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6ICdhYnJhaGFtJyxcbiAgICAgICAgICAgIGl0ZW1JZDogJ2dhbCAzOjYnLFxuICAgICAgICAgICAgdGl0bGU6ICdnYWwgMzo2JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnRleHRJZDoge1xuICAgICAgICAgICAgICBncm91cElkOiAnYWJyYWhhbScsXG4gICAgICAgICAgICAgIG9jY3VycmVuY2U6IDEsXG4gICAgICAgICAgICAgIHJlZmVyZW5jZToge1xuICAgICAgICAgICAgICAgICdib29rSWQnOiAnZ2FsJywgJ2NoYXB0ZXInOiAzLCAndmVyc2UnOiA3LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyb3VwSWQ6ICdhYnJhaGFtJyxcbiAgICAgICAgICAgIGl0ZW1JZDogJ2dhbCAzOjcnLFxuICAgICAgICAgICAgdGl0bGU6ICdnYWwgMzo3JyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgaWQ6ICdhYnJhaGFtJyxcbiAgICAgICAgcHJvZ3Jlc3M6IDUwLFxuICAgICAgICB0aXRsZTogJ0FicmFoYW0nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb250ZXh0SWQ6IHtcbiAgICAgICAgICAgICAgZ3JvdXBJZDogJ2Fkb3B0aW9uJyxcbiAgICAgICAgICAgICAgb2NjdXJyZW5jZTogMSxcbiAgICAgICAgICAgICAgcmVmZXJlbmNlOiB7XG4gICAgICAgICAgICAgICAgJ2Jvb2tJZCc6ICdnYWwnLCAnY2hhcHRlcic6IDQsICd2ZXJzZSc6IDUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JvdXBJZDogJ2Fkb3B0aW9uJyxcbiAgICAgICAgICAgIGl0ZW1JZDogJ2dhbCA0OjUnLFxuICAgICAgICAgICAgdGl0bGU6ICdnYWwgNDo1JyxcbiAgICAgICAgICB9XSxcbiAgICAgICAgaWQ6ICdhZG9wdGlvbicsXG4gICAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgICB0aXRsZTogJ2Fkb3B0aW9uLCBhZG9wdCwgYWRvcHRlZCcsXG4gICAgICB9XTtcbiAgICBjb25zdCBtZW51RGF0YSA9IGdlbmVyYXRlTWVudURhdGEoZ3JvdXBJbmRleCwgZ3JvdXBEYXRhLCBwcm9ncmVzc0tleSxcbiAgICAgIG9uUHJvY2Vzc0l0ZW0pO1xuICAgIGV4cGVjdChtZW51RGF0YSkudG9FcXVhbChleHBlY3RlZCk7XG4gIH0pO1xufSk7XG4iXX0=